(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d59ec0e"],{3009:function(t,n,e){"use strict";var a=e("6dd0"),i=e.n(a);i.a},"6dd0":function(t,n,e){},"84bc":function(t,n,e){"use strict";var a=e("eee7"),i=e.n(a);i.a},9587:function(t,n,e){},9952:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"message"},[e("Nav"),e("div",{staticClass:"main"},[e("div",{staticClass:"content"},[e("article",[e("section",[e("h2",[t._v("留言板")]),e("p",[t._v("沟通交流,拉近你我~")]),e("RichText",{on:{Sub:t.handleSubmit}})],1),e("section",{staticClass:"mes"},[e("ul",t._l(t.commentList,(function(n,a){return e("li",{key:a},[e("div",{staticClass:"comment-parent"},[e("div",{staticClass:"p-img"}),e("div",{staticClass:"p-name"},[t._v(t._s(n.user.user))]),e("div",{staticClass:"p-content",domProps:{innerHTML:t._s(n.content)}}),e("div",{staticClass:"p-time"},[e("span",[t._v(t._s(t._f("getTime")(n.date)))]),e("span",{staticClass:"reply",on:{click:function(e){return t.reply(a,n._id)}}},[t._v("回复")])])]),e("ChildMessage",{attrs:{parentComment:n,parentUser:n.user.user,childCommentList:n.children}}),e("ParentRichText",{ref:"parentR",refInFor:!0,attrs:{childIndex:t.ind},on:{Parent:t.parentSubmit}})],1)})),0)])])])])],1)},i=[],s=(e("99af"),e("216c")),c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"edit"},[e("textarea",{staticStyle:{display:"none"},attrs:{id:"edit"}}),e("button",{staticClass:"layui-btn",attrs:{type:"button"},on:{click:t.handleClick}},[t._v("提交")])])},o=[],l={name:"RichText",data:function(){return{layedit:null,index:0,layui:""}},methods:{handleClick:function(){this.$emit("Sub",this.layedit.getContent(this.index))}},mounted:function(){var t=this;layui.use("layedit",(function(){t.layedit=layui.layedit,t.index=t.layedit.build("edit",{tool:["face"]})}))}},r=l,u=(e("84bc"),e("3009"),e("2877")),d=Object(u["a"])(r,c,o,!1,null,null,null),m=d.exports,f=e("bf1a"),h=e("96c3"),p=e("6ccc"),y=(e("9490"),p["a"].postIfLogin),g=p["a"].postMessage,v=p["a"].getMessage,C=p["a"].postChildMessage,_={name:"index",computed:{},data:function(){return{layui:null,commentList:[],commentIndex:"",ind:1,childReply:"",isTrue:!0,parentId:""}},filters:{getTime:function(t){var n=new Date(t);return"".concat(n.getFullYear(),"年").concat(n.getMonth()+1,"月").concat(n.getDate(),"日")}},methods:{handleSubmit:function(t){y().then((function(n){n.data.userInfo?(console.log(n.data,"nn"),g({user:n.data.userInfo._id,content:t}).then((function(t){layer.msg("留言成功",{icon:1}),setTimeout((function(){window.location.reload()}),1e3)})).catch((function(){layer.msg("服务器错误~请稍后再试",{icon:2})}))):layer.msg("请先登录",{icon:2})})).catch((function(){layer.msg("服务器出错了",{icon:2})}))},parentSubmit:function(t){var n=this;y().then((function(e){e.data.userInfo?(console.log(e.data,111),console.log(t,"pp"),C({parentId:n.parentId,user:e.data.userInfo._id,content:t,reUser:e.data.userInfo.user}).then((function(t){layer.msg("留言成功",{icon:1}),setTimeout((function(){window.location.reload()}),1e4)})).catch((function(){layer.msg("服务器错误~请稍后再试",{icon:2})}))):layer.msg("请先登录",{icon:2})})).catch((function(){layer.msg("服务器出错了",{icon:2})}))},reply:function(t,n){this.commentIndex=t,this.parentId=n,this.$refs.parentR[t].parentReply(t)}},created:function(){},mounted:function(){var t=this;v().then((function(n){t.commentList=n.data.data,console.log(t.commentList,44)}))},components:{Nav:s["a"],RichText:m,ParentRichText:f["a"],ChildMessage:h["a"]}},b=_,x=(e("a649"),Object(u["a"])(b,a,i,!1,null,"696195c7",null));n["default"]=x.exports},a649:function(t,n,e){"use strict";var a=e("9587"),i=e.n(a);i.a},eee7:function(t,n,e){}}]);
//# sourceMappingURL=chunk-4d59ec0e.b609d324.js.map