(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d16f5ba"],{"06c7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"articleDetail"},[a("Nav"),a("div",{staticClass:"detail"},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[a("h5",[a("a",{ref:"title",attrs:{model:t.article.title,value:t.article.title}},[t._v(t._s(t.article.title))])]),a("span",[t._v("作者")]),a("span",[t._v("...")]),a("span",[t._v("阅读")]),a("span",[t._v("...")]),a("span",[t._v("发表时间")]),a("span",[t._v("...")])]),a("aplayer",{attrs:{music:{title:"faded",artist:"walker",src:"mp3/faded.m4a",pic:"img/4.jpg"},list:[{title:"少年",artist:"梦然",src:"mp3/少年.m4a",pic:"img/4.jpg"},{title:"faded",artist:"walker",src:"mp3/faded.m4a",pic:"img/4.jpg"}],listFolded:!0,autoplay:!0,shuffle:!0,repeat:"repeat-all"}}),a("div",{staticClass:"time"},[a("p",[t._v(t._s(t.article.day))]),a("div",[a("span",[t._v(t._s(t.article.month+"月"))]),a("span",[t._v(t._s(t.article.year))])])])],1),a("aplayer",{staticClass:"maxaplayer",attrs:{music:{title:"faded",artist:"walker",src:"mp3/faded.m4a",pic:"img/4.jpg"},list:[{title:"少年",artist:"梦然",src:"mp3/少年.m4a",pic:"img/4.jpg"},{title:"faded",artist:"walker",src:"mp3/faded.m4a",pic:"img/4.jpg"}],listFolded:!0,autoplay:!0,shuffle:!0,repeat:"repeat-all"}}),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.content)}})],1),a("ArticleMessage",{on:{handleComment:t.comment}})],1)},i=[],s=a("216c"),c=a("c728"),o=a.n(c),r=a("6ccc"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("div",{staticClass:"main"},[a("div",{staticClass:"content"},[a("article",[a("section",[a("h5",[t._v("发表评论")]),a("MessageRichText",{on:{Sub:t.handleSubmit}})],1),a("section",{staticClass:"mes"},[a("ul",t._l(t.commentList,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"comment-parent"},[a("div",{staticClass:"p-img"}),a("div",{staticClass:"p-name"},[t._v(t._s(e.user.user))]),a("div",{staticClass:"p-content",domProps:{innerHTML:t._s(e.content)}}),a("div",{staticClass:"p-time"},[a("span",[t._v(t._s(t._f("getTime")(e.date)))]),a("span",{staticClass:"reply",on:{click:function(a){return t.reply(n,e._id)}}},[t._v("回复")])])]),a("ChildMessage",{attrs:{parentComment:e,parentUser:e.user.user,childCommentList:e.children}}),a("ParentRichText",{ref:"parentR",refInFor:!0,on:{Parent:t.parentSubmit}})],1)})),0)])])])])])},u=[],d=(a("99af"),a("4160"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("textarea",{staticStyle:{display:"none"},attrs:{id:"edit"}}),a("button",{staticClass:"layui-btn",attrs:{type:"button"},on:{click:t.handleClick}},[t._v("提交")])])}),f=[],m={name:"RichText",data:function(){return{layedit:null,index:0,layui:""}},methods:{handleClick:function(){this.$emit("Sub",this.layedit.getContent(this.index))}},mounted:function(){var t=this;layui.use("layedit",(function(){t.layedit=layui.layedit,t.index=t.layedit.build("edit",{tool:["face"]})}))}},p=m,h=(a("53b7"),a("abe6"),a("2877")),v=Object(h["a"])(p,d,f,!1,null,null,null),g=v.exports,y=(a("9490"),a("bf1a")),_=a("96c3"),b=(r["a"].postArticleComment,r["a"].postArticleMessage,r["a"].getArticleMessage),C=r["a"].postArticleChildMessage,w=r["a"].postIfLogin,x={name:"index",data:function(){return{layui:null,commentList:[],comment:{}}},filters:{getTime:function(t){var e=new Date(t);return"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")}},methods:{handleSubmit:function(t){console.log(t,89),this.$emit("handleComment",t)},parentSubmit:function(t){var e=this;w().then((function(a){a.data.userInfo?(console.log(a.data,111),console.log(t,"pp"),C({parentId:e.parentId,user:a.data.userInfo._id,content:t,reUser:a.data.userInfo.user}).then((function(t){layer.msg("留言成功",{icon:1}),setTimeout((function(){window.location.reload()}),1e4)})).catch((function(){layer.msg("服务器错误~请稍后再试",{icon:2})}))):layer.msg("请先登录",{icon:2})})).catch((function(){layer.msg("服务器出错了",{icon:2})}))},reply:function(t,e){this.commentIndex=t,this.parentId=e,this.$refs.parentR[t].parentReply(t)}},created:function(){},watch:{article:function(){}},mounted:function(){var t=this;console.log(this.$store.state.article,12),console.log(this.comment,23),b().then((function(e){t.articleList=e.data.data,t.articleList.forEach((function(e){e.title===t.$store.state.article.title&&(t.commentList=e.comment,console.log(t.commentList,56))}))}))},components:{MessageRichText:g,ParentRichText:y["a"],ChildMessage:_["a"]}},E=x,I=(a("b694"),Object(h["a"])(E,l,u,!1,null,"28788b70",null)),M=I.exports,k=r["a"].postIfLogin,T=r["a"].postArticleComment,L=r["a"].postArticleMessage,$={data:function(){return{article:""}},components:{Nav:s["a"],aplayer:o.a,ArticleMessage:M},methods:{comment:function(t){var e=this;k().then((function(a){a.data.userInfo?(console.log(a.data,111),console.log(t,98),T({user:a.data.userInfo._id,content:t}).then((function(t){console.log(t.data.data,"zz"),L({comment:t.data.data,articleId:e.$store.state.article._id}).then((function(t){layer.msg("留言成功",{icon:1}),setTimeout((function(){window.location.reload()}),2e4)})).catch((function(){layer.msg("服务器错误~请稍后再试",{icon:2})})),layer.msg("留言成功",{icon:1}),setTimeout((function(){window.location.reload()}),2e4)})).catch((function(){layer.msg("服务器错误~请稍后再试",{icon:2})}))):layer.msg("请先登录",{icon:2})})).catch((function(){layer.msg("服务器出错了",{icon:2})}))}},created:function(){this.article=this.$store.state.article,console.log(this.article,11)}},j=$,A=(a("d3f9"),Object(h["a"])(j,n,i,!1,null,null,null));e["default"]=A.exports},"159b":function(t,e,a){var n=a("da84"),i=a("fdbc"),s=a("17c2"),c=a("9112");for(var o in i){var r=n[o],l=r&&r.prototype;if(l&&l.forEach!==s)try{c(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,i=a("a640"),s=a("ae40"),c=i("forEach"),o=s("forEach");t.exports=c&&o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"380d":function(t,e,a){},4160:function(t,e,a){"use strict";var n=a("23e7"),i=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"49aa":function(t,e,a){},"53b7":function(t,e,a){"use strict";var n=a("380d"),i=a.n(n);i.a},a36d:function(t,e,a){},abe6:function(t,e,a){"use strict";var n=a("e8a2"),i=a.n(n);i.a},b694:function(t,e,a){"use strict";var n=a("49aa"),i=a.n(n);i.a},b727:function(t,e,a){var n=a("0366"),i=a("44ad"),s=a("7b0b"),c=a("50c4"),o=a("65f0"),r=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d;return function(m,p,h,v){for(var g,y,_=s(m),b=i(_),C=n(p,h,3),w=c(b.length),x=0,E=v||o,I=e?E(m,w):a?E(m,0):void 0;w>x;x++)if((f||x in b)&&(g=b[x],y=C(g,x,_),t))if(e)I[x]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:r.call(I,g)}else if(u)return!1;return d?-1:l||u?u:I}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d3f9:function(t,e,a){"use strict";var n=a("a36d"),i=a.n(n);i.a},e8a2:function(t,e,a){}}]);
//# sourceMappingURL=chunk-8d16f5ba.07d0e808.js.map